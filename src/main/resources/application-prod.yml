spring:
  application:
    name: mercury-auth
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/mercury_auth_new?useSSL=false&serverTimezone=UTC}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:root}
    driver-class-name: com.mysql.cj.jdbc.Driver
  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}
    database: 0
  mail:
    host: ${MAIL_HOST:smtp.example.com}
    port: ${MAIL_PORT:25}
    username: ${MAIL_USERNAME:user}
    password: ${MAIL_PASSWORD:pass}
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true

security:
  jwt:
    secret: ${JWT_SECRET}
    ttl-seconds: 7200
  code:
    ttl-minutes: 10
    phone-ttl-minutes: 5
  rate-limit:
    # Rate limiting configuration for various auth operations
    # max-attempts: Maximum number of requests allowed within the window
    # window-minutes: Time window in minutes for rate limiting
    # These limits apply to:
    # - Sending email verification codes (RATE_LIMIT_SEND_EMAIL_CODE)
    # - Sending phone verification codes (RATE_LIMIT_SEND_PHONE_CODE)
    # - Password login attempts (RATE_LIMIT_LOGIN_PASSWORD)
    # - Email login attempts (RATE_LIMIT_LOGIN_EMAIL)
    # - Phone login attempts (RATE_LIMIT_LOGIN_PHONE)
    # - Captcha generation requests (per action type)
    max-attempts: 10
    window-minutes: 1
  captcha:
    threshold: 3
    ttl-minutes: 5

mail:
  from: ${MAIL_FROM:no-reply@example.com}

# Swagger/OpenAPI configuration - DISABLED in production for security
springdoc:
  api-docs:
    enabled: false
  swagger-ui:
    enabled: false

logging:
  level:
    com.mercury.auth: INFO
    org.springframework: WARN
    org.springframework.security: WARN

# SECURITY NOTE: Never commit secrets to version control
# Set JWT_SECRET, DB_PASSWORD, MAIL_PASSWORD, etc. via environment variables
# For production deployment, use secrets management (e.g., Kubernetes Secrets, AWS Secrets Manager)

