spring:
  application:
    name: mercury-auth
  datasource:
    url: jdbc:mysql://localhost:3306/mercury_auth_new?useSSL=false&serverTimezone=UTC
    username: root
    password: root
    driver-class-name: com.mysql.cj.jdbc.Driver
  redis:
    host: localhost
    port: 6379
    database: 0
  mail:
    host: smtp.example.com
    port: 25
    username: user
    password: pass
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true

security:
  jwt:
    # Development secret - replace with strong secret in production
    # Use JWT_SECRET environment variable to override
    secret: ${JWT_SECRET:dev-secret-change-in-production-f136803ab9c241079ba0cc1b5d02ee77}
    ttl-seconds: 7200
  code:
    ttl-minutes: 10
    phone-ttl-minutes: 5
    # OTP protection settings
    cooldown-seconds: 60  # Minimum time between code requests
    max-daily-requests: 20  # Maximum code requests per day per identifier
    max-verify-attempts: 5  # Maximum verification attempts before lockout
  rate-limit:
    # Rate limiting configuration for various auth operations
    # max-attempts: Maximum number of requests allowed within the window
    # window-minutes: Time window in minutes for rate limiting
    # These limits apply to:
    # - Sending email verification codes (RATE_LIMIT_SEND_EMAIL_CODE)
    # - Sending phone verification codes (RATE_LIMIT_SEND_PHONE_CODE)
    # - Password login attempts (RATE_LIMIT_LOGIN_PASSWORD)
    # - Email login attempts (RATE_LIMIT_LOGIN_EMAIL)
    # - Phone login attempts (RATE_LIMIT_LOGIN_PHONE)
    # - Token refresh requests (RATE_LIMIT_REFRESH_TOKEN)
    # - Captcha generation requests (per action type)
    max-attempts: 10
    window-minutes: 1
    # IP-based rate limiting for additional protection
    ip:
      max-attempts: 50  # Higher limit for IP-based rate limiting
      window-minutes: 1
  captcha:
    threshold: 3
    ttl-minutes: 5

mail:
  from: "no-reply@example.com"

# Swagger/OpenAPI configuration
springdoc:
  api-docs:
    enabled: true  # Enable in dev for testing
  swagger-ui:
    enabled: true  # Enable in dev for testing

logging:
  level:
    com.mercury.auth: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG

# NOTE: This is development configuration
# For production, use environment variables and secrets management

